<!DOCTYPE html>
<html lang="en" ng-app="elevatorSim">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<link href="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
	<link href="/style.css" rel="stylesheet" type="text/css" />
	
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.2.0/js/bootstrap.min.js"></script>
	<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.23/angular.min.js"></script>
	
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript" src="js/services.js"></script>
	<script type="text/javascript" src="js/controllers.js"></script>
	<script type="text/javascript" src="js/filters.js"></script>
	
	<title>Sim Elevator</title>
</head>
<body ng-controller="IndexController">

	<form class="form-inline" role="form">
		<div class="form-group">
			<label class="sr-only" for="resetSimElevators">Number of Elevators</label>
			<input type="number" class="form-control" id="resetSimElevators" ng-model="resetSimElevators" placeholder="Num Elevators">
		</div>
		<div class="form-group">
			<label class="sr-only" for="resetSimFloors">Number of Floors</label>
			<input type="number" class="form-control" id="resetSimFloors" ng-model="resetSimFloors" placeholder="Num Floors">
		</div>
		<div class="form-group">
			<label class="sr-only" for="resetSimMaxOccupancy">Maximum Elevator Occupancy</label>
			<input type="number" class="form-control" id="resetSimMaxOccupancy" ng-model="resetSimMaxOccupancy" placeholder="Max Occupancy">
		</div>
		<button type="submit" class="btn btn-default" ng-click="resetSimulation()">Reset</button>
		<button type="submit" class="btn btn-default" ng-click="stopSimulation()">Stop</button>
		<!-- todo form validation - must exist, must be numbers, num elevators must be >= 1, num floors must be >= 2 -->
	</form>

	<form class="form-inline" role="form">
		<div class="form-group">
			<label class="sr-only" for="addPassengerStartLevel">Start Level</label>
			<input type="number" class="form-control" id="addPassengerStartLevel" ng-model="addPassengerStartLevel" placeholder="Start Level">
		</div>
		<div class="form-group">
			<label class="sr-only" for="addPassengerDestinationLevel">Destination Level</label>
			<input type="number" class="form-control" id="addPassengerDestinationLevel" ng-model="addPassengerDestinationLevel" placeholder="Destination Level">
		</div>
		<button type="submit" class="btn btn-default" ng-click="addPassenger()">Add Passenger</button>
		<!-- todo form validation - must exist, must be numbers, must be within floor limits -->
	</form>

	<form class="form-inline" role="form">
		<div class="form-group">
			<label class="sr-only" for="updateElevatorNumber">Elevator Number</label>
			<input type="number" class="form-control" id="updateElevatorNumber" ng-model="updateElevatorNumber" placeholder="Update Elevator">
		</div>
		<div class="form-group">
			<label class="sr-only" for="updateElevatorLevel">Elevator Level</label>
			<input type="number" class="form-control" id="updateElevatorLevel" ng-model="updateElevatorLevel" placeholder="Elevator Level">
		</div>
		<button type="submit" class="btn btn-default" ng-click="openElevator()">Open Elevator</button>
		<button type="submit" class="btn btn-default" ng-click="closeElevator()">Close Elevator</button>
		<button type="submit" class="btn btn-default" ng-click="moveElevator()">Move To Floor</button>
		<button type="submit" class="btn btn-default" ng-click="setElevatorUp(true)">Set as Up</button>
		<button type="submit" class="btn btn-default" ng-click="setElevatorUp(false)">Set as Down</button>
		<button type="submit" class="btn btn-default" ng-click="setElevatorUp(null)">Set as Stationary</button>
		<button type="submit" class="btn btn-default" ng-click="addPickupStopToElevator(true)">Pickup Going Up</button>
		<button type="submit" class="btn btn-default" ng-click="addPickupStopToElevator(false)">Pickup Going Down</button>
		<button type="submit" class="btn btn-default" ng-click="addDropoffStopToElevator()">Add Dropoff</button>
	</form>
	
	<h1>Elevators</h1>
	<ul>
		<li ng-repeat="elevator in simulation.elevators">
			Number: {{ elevator.elevatorNum }} |
			State: {{ elevator.elevatorState }} |
			Mutex: {{ elevator.doorMutex.claimed }} |
			Current Level: {{ elevator.currentFloor.getLevel() }} |
			Direction: {{ elevator.direction }} |
			Pickup Going Up Stops: {{ elevator.pickupGoingUpStops }} |
			Pickup Going Down Stops: {{ elevator.pickupGoingDownStops }} |
			Dropoff Stops: {{ elevator.dropoffStops }} |
			Passengers on Elevator: {{ elevator.passengersOnElevatorToString() }}
		</li>
	</ul>

	<h1>Floors</h1>
	<ul>
		<li ng-repeat="floor in simulation.floors | reverse">
			Number: {{ floor.floorNum }} |
			Level: {{ floor.getLevel() }} |
			Up Pressed: {{ floor.upPressed }} |
			Down Pressed: {{ floor.downPressed }} |
			Passengers on Floor: {{ floor.passengersOnFloorToString() }} |
			Elevator Slots: {{ floor.elevatorSlotsToString() }}
		</li>
	</ul>
	
	<h1>Passengers</h1>
	<ul>
		<li ng-repeat="passenger in simulation.passengers">
			Number: {{ passenger.passengerNum }} |
			Start Level: {{ passenger.startFloor.getLevel() }} |
			Destination Level: {{ passenger.destinationFloor.getLevel() }} |
			State: {{ passenger.passengerState }} |
			Start Time: {{ passenger.startTime }} |
			End Time: {{ passenger.endTime }} |
			Floor Level: {{ passenger.currentFloor.getLevel() }} |
			Elevator: {{ passenger.currentElevator.elevatorNum }}
		</li>
	</ul>
		
	<h1>Log</h1>
	<ul>
		<li ng-repeat="log in logs">{{ log.timestamp }} | {{ log.type }} | {{ log.objectId }} | {{ log.message }}</li>
	</ul>
	<!--
	<h1>Hello, world! {{ testScope }}</h1>
	<abbr title="HyperText Markup Language" class="initialism">HTML</abbr>
	
	<ul class="nav nav-pills">
		<li class="active"><a href="#" ng-click="changeFilter()">Filter</a></li>
		<li class="active"><a href="#" ng-click="clearLogs()">Clear</a></li>
		<li class="dropdown">
			<a id="drop4" role="button" data-toggle="dropdown" href="#">Dropdown <span class="caret"></span></a>
			<ul id="menu1" class="dropdown-menu" role="menu" aria-labelledby="drop4">
				<li role="presentation"><a role="menuitem" tabindex="-1" href="http://twitter.com/fat">Action</a></li>
				<li role="presentation"><a role="menuitem" tabindex="-1" href="http://twitter.com/fat">Another action</a></li>
				<li role="presentation"><a role="menuitem" tabindex="-1" href="http://twitter.com/fat">Something else here</a></li>
				<li role="presentation" class="divider"></li>
				<li role="presentation"><a role="menuitem" tabindex="-1" href="http://twitter.com/fat">Separated link</a></li>
			</ul>
		</li>
	</ul>
	
	<p>Incrementer 1: {{ incrementer1.incrementing }}</p>
	<p>Incrementer 2: {{ incrementer2.incrementing }}</p>
	<p>Logs:
		<ul>
			<li ng-repeat="log in logs | logType:filteredLogType">{{ log.timestamp }} {{ log.type }} {{ log.message }}</li>
		</ul>
	</p>
	-->
	
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		
		ga('create', 'UA-54316292-1', 'auto');
		ga('send', 'pageview');
	</script>
	
</body>
</html>